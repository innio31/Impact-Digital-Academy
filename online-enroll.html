<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DigSkills Enrollment Form</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #2563eb;
            --secondary: #1e40af;
            --accent: #f59e0b;
            --light: #f8fafc;
            --dark: #1e293b;
            --success: #10b981;
            --error: #ef4444;
        }
        
        * {
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f5f7fa;
            margin: 0;
            padding: 0;
            color: var(--dark);
        }
        
        .enrollment-container {
            max-width: 800px;
            margin: 2rem auto;
            padding: 2rem;
            background: white;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
            position: relative;
        }
        
        .form-header {
            text-align: center;
            margin-bottom: 2rem;
        }
        
        .form-header img {
            height: 60px;
            margin-bottom: 1rem;
        }
        
        .form-header h1 {
            color: var(--primary);
            margin-bottom: 0.5rem;
        }
        
        .form-group {
            margin-bottom: 1.5rem;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
        }
        
        .form-control {
            width: 100%;
            padding: 0.8rem;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 1rem;
        }
        
        .form-control:focus {
            border-color: var(--primary);
            outline: none;
            box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
        }
        
        .form-row {
            display: flex;
            gap: 1rem;
        }
        
        .form-row .form-group {
            flex: 1;
        }
        
        .btn {
            background-color: var(--accent);
            color: var(--dark);
            border: none;
            padding: 1rem 2rem;
            border-radius: 5px;
            font-weight: 600;
            cursor: pointer;
            font-size: 1rem;
            transition: all 0.3s ease;
            display: inline-block;
            text-align: center;
        }
        
        .btn:hover {
            background-color: #fbbf24;
            transform: translateY(-2px);
        }
        
        .btn-block {
            display: block;
            width: 100%;
        }
        
        .hidden {
            display: none;
        }
        
        .required:after {
            content: " *";
            color: var(--error);
        }
        
        .help-text {
            font-size: 0.85rem;
            color: #64748b;
            margin-top: 0.5rem;
        }
        
        /* Success message styling */
        .success-message {
            text-align: center;
            padding: 2rem;
            background-color: rgba(16, 185, 129, 0.1);
            border-radius: 8px;
            border-left: 4px solid var(--success);
            margin-top: 2rem;
        }
        
        .success-message h2 {
            color: var(--success);
            margin-bottom: 1rem;
        }
        
        .application-code {
            background-color: var(--light);
            padding: 1rem;
            border-radius: 5px;
            font-family: monospace;
            font-size: 1.2rem;
            margin: 1rem 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .copy-btn {
            background-color: var(--primary);
            color: white;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.9rem;
        }
        
        .copy-btn:hover {
            background-color: var(--secondary);
        }
        
        .whatsapp-btn {
            background-color: #25D366;
            color: white;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            padding: 1rem 1.5rem;
            border-radius: 5px;
            text-decoration: none;
            margin-top: 1rem;
            font-weight: 600;
        }
        
        .whatsapp-btn:hover {
            background-color: #128C7E;
        }
        
        @media (max-width: 768px) {
            .form-row {
                flex-direction: column;
                gap: 0;
            }
            
            .enrollment-container {
                padding: 1.5rem;
                margin: 1rem;
            }
        }
    </style>
</head>
<body>
    <div class="enrollment-container">
        <div class="form-header">
            <img src="images/logo.png" alt="DigSkills Logo">
            <h1>Program Enrollment Form</h1>
            <p>Fill out this form to register for DigSkills programs</p>
        </div>
        
        <form id="enrollmentForm" name="enrollment" netlify action="/thank-you.html" method="POST" netlify-honeypot="bot-field">
            <input type="hidden" name="form-name" value="enrollment">
            <p class="hidden">
                <label>Don't fill this out if you're human: <input name="bot-field"></label>
            </p>
            
            <!-- Contact Details Section -->
            <fieldset>
                <legend>Contact Information</legend>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="firstName" class="required">First Name</label>
                        <input type="text" id="firstName" name="firstName" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label for="lastName" class="required">Last Name</label>
                        <input type="text" id="lastName" name="lastName" class="form-control" required>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="email" class="required">Email Address</label>
                    <input type="email" id="email" name="email" class="form-control" required>
                </div>
                
                <div class="form-group">
                    <label for="phone" class="required">Phone Number</label>
                    <input type="tel" id="phone" name="phone" class="form-control" required>
                    <p class="help-text">Include country code (e.g., +2348012345678)</p>
                </div>
                
                <div class="form-group">
                    <label for="country" class="required">Country</label>
                    <select id="country" name="country" class="form-control" required>
                        <option value="">Select Country</option>
                        <option value="Nigeria" selected>Nigeria</option>
                        <option value="Ghana">Ghana</option>
                        <option value="South Africa">South Africa</option>
                        <option value="Kenya">Kenya</option>
                        <option value="Other">Other</option>
                    </select>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="state" class="required">State</label>
                        <select id="state" name="state" class="form-control" required>
                            <option value="">Select State</option>
                            <!-- States will be populated by JavaScript -->
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="lga" class="required">Local Government</label>
                        <select id="lga" name="lga" class="form-control" required>
                            <option value="">Select LGA</option>
                            <!-- LGAs will be populated based on state selection -->
                        </select>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="address">Street Address</label>
                    <textarea id="address" name="address" class="form-control" rows="3"></textarea>
                    <p class="help-text">Include street name, house number, and landmarks</p>
                </div>
            </fieldset>
            
            <!-- Program Details Section -->
            <fieldset>
                <legend>Program Information</legend>
                
                <div class="form-group">
                    <label for="programCategory" class="required">Program Category</label>
                    <select id="programCategory" name="programCategory" class="form-control" required>
                        <option value="">Select Category</option>
                        <option value="school">School Programs</option>
                        <option value="onsite">DigSkills Centre (Onsite)</option>
                        <option value="online">Online Learning</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="program" class="required">Program</label>
                    <select id="program" name="program" class="form-control" required disabled>
                        <option value="">Select a category first</option>
                    </select>
                </div>
                
                <div id="schoolContainer" class="form-group hidden">
                    <label for="school" class="required">School</label>
                    <select id="school" name="school" class="form-control" required>
                        <option value="">Select Your School</option>
                        <!-- Schools will be populated based on selection -->
                    </select>
                    <p class="help-text">If your school isn't listed, please contact us to register your school first.</p>
                </div>
                
                <div class="form-group">
                    <label for="howHeard">How did you hear about us?</label>
                    <select id="howHeard" name="howHeard" class="form-control">
                        <option value="">Select Option</option>
                        <option value="social">Social Media</option>
                        <option value="friend">Friend/Family</option>
                        <option value="school">School</option>
                        <option value="search">Search Engine</option>
                        <option value="advertisement">Advertisement</option>
                        <option value="event">Event/Workshop</option>
                        <option value="other">Other</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="comments">Additional Comments</label>
                    <textarea id="comments" name="comments" class="form-control" rows="3"></textarea>
                    <p class="help-text">Any special requirements or questions you have</p>
                </div>
            </fieldset>
            
            <div class="form-group">
                <input type="checkbox" id="agreeTerms" name="agreeTerms" required>
                <label for="agreeTerms">I agree to the <a href="#" target="_blank">Terms and Conditions</a> and <a href="#" target="_blank">Privacy Policy</a></label>
            </div>
            
            <!-- CAPTCHA Section -->
            <div class="form-group">
                <label for="captcha" class="required">Security Check</label>
                <div class="captcha-container" style="display: flex; align-items: center; gap: 10px;">
                    <div style="background: #f0f0f0; padding: 10px; font-family: 'Courier New', monospace; letter-spacing: 3px; font-weight: bold;">
                        <span id="captcha-text"></span>
                    </div>
                    <button type="button" id="refresh-captcha" style="background: none; border: none; cursor: pointer;">
                        <i class="fas fa-sync-alt"></i>
                    </button>
                </div>
                <input type="text" id="captcha" name="captcha" class="form-control" placeholder="Enter the code above" required style="margin-top: 10px;">
            </div>
            
            <button type="submit" class="btn btn-block">Submit Enrollment</button>
        </form>
        
        <!-- Success Message (hidden by default) -->
        <div id="successMessage" class="success-message hidden">
            <h2><i class="fas fa-check-circle"></i> Application Submitted Successfully!</h2>
            <p>Your application has been received and is being processed.</p>
            
            <div class="application-code">
                <span id="generatedCode"></span>
                <button class="copy-btn" id="copyCodeBtn">
                    <i class="far fa-copy"></i> Copy
                </button>
            </div>
            
            <p>To complete your registration and check scholarship eligibility, please send this code to our WhatsApp:</p>
            
            <a href="https://wa.me/2349051586024?text=Hello%20DigSkills,%20I%20just%20applied%20with%20code%20" id="whatsappLink" class="whatsapp-btn" target="_blank">
                <i class="fab fa-whatsapp"></i> Send via WhatsApp
            </a>
            
            <p style="margin-top: 1rem;">You'll receive a confirmation email with further instructions shortly.</p>
        </div>
    </div>

    <script>
        // Nigerian States and LGAs Data
        const nigeriaData = {
            "Abia": ["Aba North", "Aba South", "Arochukwu", "Bende", "Ikwuano", "Isiala Ngwa North", "Isiala Ngwa South", "Isuikwuato", "Obi Ngwa", "Ohafia", "Osisioma Ngwa", "Ugwunagbo", "Ukwa East", "Ukwa West", "Umuahia North", "Umuahia South", "Umu Nneochi"],
            "Adamawa": ["Demsa", "Fufure", "Ganye", "Gayuk", "Gombi", "Grie", "Hong", "Jada", "Lamurde", "Madagali", "Maiha", "Mayo Belwa", "Michika", "Mubi North", "Mubi South", "Numan", "Shelleng", "Song", "Toungo", "Yola North", "Yola South"],
            "Akwa Ibom": ["Abak", "Eastern Obolo", "Eket", "Esit Eket", "Essien Udim", "Etim Ekpo", "Etinan", "Ibeno", "Ibesikpo Asutan", "Ibiono-Ibom", "Ika", "Ikono", "Ikot Abasi", "Ikot Ekpene", "Ini", "Itu", "Mbo", "Mkpat-Enin", "Nsit-Atai", "Nsit-Ibom", "Nsit-Ubium", "Obot Akara", "Okobo", "Onna", "Oron", "Oruk Anam", "Udung-Uko", "Ukanafun", "Uruan", "Urue-Offong/Oruko", "Uyo"],
            "Anambra": ["Aguata", "Anambra East", "Anambra West", "Anaocha", "Awka North", "Awka South", "Ayamelum", "Dunukofia", "Ekwusigo", "Idemili North", "Idemili South", "Ihiala", "Njikoka", "Nnewi North", "Nnewi South", "Ogbaru", "Onitsha North", "Onitsha South", "Orumba North", "Orumba South", "Oyi"],
            "Bauchi": ["Alkaleri", "Bauchi", "Bogoro", "Damban", "Darazo", "Dass", "Gamawa", "Ganjuwa", "Giade", "Itas/Gadau", "Jama'are", "Katagum", "Kirfi", "Misau", "Ningi", "Shira", "Tafawa Balewa", "Toro", "Warji", "Zaki"],
            "Bayelsa": ["Brass", "Ekeremor", "Kolokuma/Opokuma", "Nembe", "Ogbia", "Sagbama", "Southern Ijaw", "Yenagoa"],
            "Benue": ["Ado", "Agatu", "Apa", "Buruku", "Gboko", "Guma", "Gwer East", "Gwer West", "Katsina-Ala", "Konshisha", "Kwande", "Logo", "Makurdi", "Obi", "Ogbadibo", "Ohimini", "Oju", "Okpokwu", "Oturkpo", "Tarka", "Ukum", "Ushongo", "Vandeikya"],
            "Borno": ["Abadam", "Askira/Uba", "Bama", "Bayo", "Biu", "Chibok", "Damboa", "Dikwa", "Gubio", "Guzamala", "Gwoza", "Hawul", "Jere", "Kaga", "Kala/Balge", "Konduga", "Kukawa", "Kwaya Kusar", "Mafa", "Magumeri", "Maiduguri", "Marte", "Mobbar", "Monguno", "Ngala", "Nganzai", "Shani"],
            "Cross River": ["Abi", "Akamkpa", "Akpabuyo", "Bakassi", "Bekwarra", "Biase", "Boki", "Calabar Municipal", "Calabar South", "Etung", "Ikom", "Obanliku", "Obubra", "Obudu", "Odukpani", "Ogoja", "Yakuur", "Yala"],
            "Delta": ["Aniocha North", "Aniocha South", "Bomadi", "Burutu", "Ethiope East", "Ethiope West", "Ika North East", "Ika South", "Isoko North", "Isoko South", "Ndokwa East", "Ndokwa West", "Okpe", "Oshimili North", "Oshimili South", "Patani", "Sapele", "Udu", "Ughelli North", "Ughelli South", "Ukwuani", "Uvwie", "Warri North", "Warri South", "Warri South West"],
            "Ebonyi": ["Abakaliki", "Afikpo North", "Afikpo South", "Ebonyi", "Ezza North", "Ezza South", "Ikwo", "Ishielu", "Ivo", "Izzi", "Ohaozara", "Ohaukwu", "Onicha"],
            "Edo": ["Akoko-Edo", "Egor", "Esan Central", "Esan North-East", "Esan South-East", "Esan West", "Etsako Central", "Etsako East", "Etsako West", "Igueben", "Ikpoba-Okha", "Oredo", "Orhionmwon", "Ovia North-East", "Ovia South-West", "Owan East", "Owan West", "Uhunmwonde"],
            "Ekiti": ["Ado Ekiti", "Efon", "Ekiti East", "Ekiti South-West", "Ekiti West", "Emure", "Gbonyin", "Ido-Osi", "Ijero", "Ikere", "Ikole", "Ilejemeje", "Irepodun/Ifelodun", "Ise/Orun", "Moba", "Oye"],
            "Enugu": ["Aninri", "Awgu", "Enugu East", "Enugu North", "Enugu South", "Ezeagu", "Igbo Etiti", "Igbo Eze North", "Igbo Eze South", "Isi Uzo", "Nkanu East", "Nkanu West", "Nsukka", "Oji River", "Udenu", "Udi", "Uzo-Uwani"],
            "Gombe": ["Akko", "Balanga", "Billiri", "Dukku", "Funakaye", "Gombe", "Kaltungo", "Kwami", "Nafada", "Shongom", "Yamaltu/Deba"],
            "Imo": ["Aboh Mbaise", "Ahiazu Mbaise", "Ehime Mbano", "Ezinihitte", "Ideato North", "Ideato South", "Ihitte/Uboma", "Ikeduru", "Isiala Mbano", "Isu", "Mbaitoli", "Ngor Okpala", "Njaba", "Nkwerre", "Nwangele", "Obowo", "Oguta", "Ohaji/Egbema", "Okigwe", "Onuimo", "Orlu", "Orsu", "Oru East", "Oru West", "Owerri Municipal", "Owerri North", "Owerri West"],
            "Jigawa": ["Auyo", "Babura", "Biriniwa", "Birnin Kudu", "Buji", "Dutse", "Gagarawa", "Garki", "Gumel", "Guri", "Gwaram", "Gwiwa", "Hadejia", "Jahun", "Kafin Hausa", "Kaugama", "Kazaure", "Kiri Kasama", "Maigatari", "Malam Madori", "Miga", "Ringim", "Roni", "Sule Tankarkar", "Taura", "Yankwashi"],
            "Kaduna": ["Birnin Gwari", "Chikun", "Giwa", "Igabi", "Ikara", "Jaba", "Jema'a", "Kachia", "Kaduna North", "Kaduna South", "Kagarko", "Kajuru", "Kaura", "Kauru", "Kubau", "Kudan", "Lere", "Makarfi", "Sabon Gari", "Sanga", "Soba", "Zangon Kataf", "Zaria"],
            "Kano": ["Ajingi", "Albasu", "Bagwai", "Bebeji", "Bichi", "Bunkure", "Dala", "Dambatta", "Dawakin Kudu", "Dawakin Tofa", "Doguwa", "Fagge", "Gabasawa", "Garko", "Garun Mallam", "Gaya", "Gezawa", "Gwale", "Gwarzo", "Kabo", "Kano Municipal", "Karaye", "Kibiya", "Kiru", "Kumbotso", "Kunchi", "Kura", "Madobi", "Makoda", "Minjibir", "Nasarawa", "Rano", "Rimin Gado", "Rogo", "Shanono", "Sumaila", "Takai", "Tarauni", "Tofa", "Tsanyawa", "Tudun Wada", "Ungogo", "Warawa", "Wudil"],
            "Katsina": ["Bakori", "Batagarawa", "Batsari", "Baure", "Bindawa", "Charanchi", "Dan Musa", "Dandume", "Danja", "Daura", "Dutsi", "Dutsin-Ma", "Faskari", "Funtua", "Ingawa", "Jibia", "Kafur", "Kaita", "Kankara", "Kankia", "Katsina", "Kurfi", "Kusada", "Mai'Adua", "Malumfashi", "Mani", "Mashi", "Matazu", "Musawa", "Rimi", "Sabuwa", "Safana", "Sandamu", "Zango"],
            "Kebbi": ["Aleiro", "Arewa Dandi", "Argungu", "Augie", "Bagudo", "Birnin Kebbi", "Bunza", "Dandi", "Fakai", "Gwandu", "Jega", "Kalgo", "Koko/Besse", "Maiyama", "Ngaski", "Sakaba", "Shanga", "Suru", "Wasagu/Danko", "Yauri", "Zuru"],
            "Kogi": ["Adavi", "Ajaokuta", "Ankpa", "Bassa", "Dekina", "Ibaji", "Idah", "Igalamela-Odolu", "Ijumu", "Kabba/Bunu", "Kogi", "Lokoja", "Mopa-Muro", "Ofu", "Ogori/Magongo", "Okehi", "Okene", "Olamaboro", "Omala", "Yagba East", "Yagba West"],
            "Kwara": ["Asa", "Baruten", "Edu", "Ekiti", "Ifelodun", "Ilorin East", "Ilorin South", "Ilorin West", "Irepodun", "Isin", "Kaiama", "Moro", "Offa", "Oke Ero", "Oyun", "Pategi"],
            "Lagos": ["Agege", "Ajeromi-Ifelodun", "Alimosho", "Amuwo-Odofin", "Apapa", "Badagry", "Epe", "Eti-Osa", "Ibeju-Lekki", "Ifako-Ijaiye", "Ikeja", "Ikorodu", "Kosofe", "Lagos Island", "Lagos Mainland", "Mushin", "Ojo", "Oshodi-Isolo", "Shomolu", "Surulere"],
            "Nasarawa": ["Akwanga", "Awe", "Doma", "Karu", "Keana", "Keffi", "Kokona", "Lafia", "Nasarawa", "Nasarawa Egon", "Obi", "Toto", "Wamba"],
            "Niger": ["Agaie", "Agwara", "Bida", "Borgu", "Bosso", "Chanchaga", "Edati", "Gbako", "Gurara", "Katcha", "Kontagora", "Lapai", "Lavun", "Magama", "Mariga", "Mashegu", "Mokwa", "Munya", "Paikoro", "Rafi", "Rijau", "Shiroro", "Suleja", "Tafa", "Wushishi"],
            "Ogun": ["Abeokuta North", "Abeokuta South", "Ado-Odo/Ota", "Egbado North", "Egbado South", "Ewekoro", "Ifo", "Ijebu East", "Ijebu North", "Ijebu North East", "Ijebu Ode", "Ikenne", "Imeko Afon", "Ipokia", "Obafemi Owode", "Odeda", "Odogbolu", "Ogun Waterside", "Remo North", "Shagamu"],
            "Ondo": ["Akoko North-East", "Akoko North-West", "Akoko South-East", "Akoko South-West", "Akure North", "Akure South", "Ese Odo", "Idanre", "Ifedore", "Ilaje", "Ile Oluji/Okeigbo", "Irele", "Odigbo", "Okitipupa", "Ondo East", "Ondo West", "Ose", "Owo"],
            "Osun": ["Aiyedade", "Aiyedire", "Atakunmosa East", "Atakunmosa West", "Boluwaduro", "Boripe", "Ede North", "Ede South", "Egbedore", "Ejigbo", "Ife Central", "Ife East", "Ife North", "Ife South", "Ifedayo", "Ifelodun", "Ila", "Ilesa East", "Ilesa West", "Irepodun", "Irewole", "Isokan", "Iwo", "Obokun", "Odo Otin", "Ola Oluwa", "Olorunda", "Oriade", "Orolu", "Osogbo"],
            "Oyo": ["Afijio", "Akinyele", "Atiba", "Atisbo", "Egbeda", "Ibadan North", "Ibadan North-East", "Ibadan North-West", "Ibadan South-East", "Ibadan South-West", "Ibarapa Central", "Ibarapa East", "Ibarapa North", "Ido", "Irepo", "Iseyin", "Itesiwaju", "Iwajowa", "Kajola", "Lagelu", "Ogbomosho North", "Ogbomosho South", "Ogo Oluwa", "Olorunsogo", "Oluyole", "Ona Ara", "Orelope", "Ori Ire", "Oyo East", "Oyo West", "Saki East", "Saki West", "Surulere"],
            "Plateau": ["Barkin Ladi", "Bassa", "Bokkos", "Jos East", "Jos North", "Jos South", "Kanam", "Kanke", "Langtang North", "Langtang South", "Mangu", "Mikang", "Pankshin", "Qua'an Pan", "Riyom", "Shendam", "Wase"],
            "Rivers": ["Abua/Odual", "Ahoada East", "Ahoada West", "Akuku-Toru", "Andoni", "Asari-Toru", "Bonny", "Degema", "Eleme", "Emuoha", "Etche", "Gokana", "Ikwerre", "Khana", "Obio/Akpor", "Ogba/Egbema/Ndoni", "Ogu/Bolo", "Okrika", "Omuma", "Opobo/Nkoro", "Oyigbo", "Port Harcourt", "Tai"],
            "Sokoto": ["Binji", "Bodinga", "Dange Shuni", "Gada", "Goronyo", "Gudu", "Gwadabawa", "Illela", "Isa", "Kebbe", "Kware", "Rabah", "Sabon Birni", "Shagari", "Silame", "Sokoto North", "Sokoto South", "Tambuwal", "Tangaza", "Tureta", "Wamako", "Wurno", "Yabo"],
            "Taraba": ["Ardo Kola", "Bali", "Donga", "Gashaka", "Gassol", "Ibi", "Jalingo", "Karim Lamido", "Kurmi", "Lau", "Sardauna", "Takum", "Ussa", "Wukari", "Yorro", "Zing"],
            "Yobe": ["Bade", "Bursari", "Damaturu", "Fika", "Fune", "Geidam", "Gujba", "Gulani", "Jakusko", "Karasuwa", "Machina", "Nangere", "Nguru", "Potiskum", "Tarmuwa", "Yunusari", "Yusufari"],
            "Zamfara": ["Anka", "Bakura", "Birnin Magaji/Kiyaw", "Bukkuyum", "Bungudu", "Gummi", "Gusau", "Kaura Namoda", "Maradun", "Maru", "Shinkafi", "Talata Mafara", "Chafe", "Zurmi"]
        };

        // Programs by Category with email templates
        const programsByCategory = {
            "school": [
                {name: "Basic Computer Operations", emailTemplate: "basic-computer-email"},
                {name: "Internet Safety & Digital Citizenship", emailTemplate: "internet-safety-email"},
                {name: "Google Workspace/Microsoft 365 Essentials", emailTemplate: "office-email"},
                {name: "Scratch/Blockly Programming", emailTemplate: "scratch-email"},
                {name: "HTML Essentials", emailTemplate: "html-email"},
                {name: "CSS Essentials", emailTemplate: "css-email"},
                {name: "JavaScript Essentials", emailTemplate: "js-email"},
                {name: "Python Basics", emailTemplate: "python-email"},
                {name: "Robotics (Arduino Kits)", emailTemplate: "robotics-email"},
                {name: "Data Science with Excel", emailTemplate: "data-science-email"},
                {name: "AI Principles (Conceptual)", emailTemplate: "ai-email"}
            ],
            "onsite": [
                {name: "Full-Stack Development", emailTemplate: "fullstack-email"},
                {name: "Data Analysis (Python, SQL, Power BI)", emailTemplate: "data-analysis-email"},
                {name: "Cybersecurity Fundamentals", emailTemplate: "cyber-email"},
                {name: "Professional Communication", emailTemplate: "communication-email"},
                {name: "LinkedIn Optimisation", emailTemplate: "linkedin-email"},
                {name: "Freelance Basics", emailTemplate: "freelance-email"},
                {name: "Desktop Publishing", emailTemplate: "publishing-email"},
                {name: "Web Development", emailTemplate: "webdev-email"}
            ],
            "online": [
                {name: "Microsoft Office Specialist", emailTemplate: "office-email"},
                {name: "Web Development Basics", emailTemplate: "webdev-email"},
                {name: "Junior Cybersecurity Analyst", emailTemplate: "cyber-junior-email"},
                {name: "English for IT", emailTemplate: "english-it-email"},
                {name: "AI & Data Scientist", emailTemplate: "ai-email"},
                {name: "PC Technician", emailTemplate: "pctech-email"}
            ]
        };

        // Email templates for each program
        const emailTemplates = {
           "office-email": {
        subject: "Welcome to Microsoft 365/Google Workspace",
        body: `Dear {firstName},

Thank you for your interest in our Microsoft 365/Google Workspace course! We're excited to support you in mastering these essential productivity tools. Below are key details to help you prepare:

Key Details
Duration: 1 Block (10 weeks of rigorous learning).
Schedule: July 28 – October 5, 2025.
Time Commitment: At least 7 hours per week (to keep up with lessons, assignments, and projects).

Requirements for Enrollment
Before proceeding, ensure you:
- Can dedicate 7+ hours weekly to learning and assignments.
- Are ready to take a prior knowledge test (link provided below). This helps us tailor the experience to your skill level.

⚠️ Please only take the test if you can meet the time and commitment requirements above.

We're here to support your growth, but success in this course depends on your availability and dedication. If you're ready, we can't wait to see you in class!

Best regards,
DigSkills Team`
    },
    "webdev-email": {
        subject: "Welcome to Web Development Basics",
        body: `Dear {firstName},

Thank you for your interest in our Web Development Basics course! We're excited to guide you through the fundamentals of building websites. Below are key details to help you prepare:

Key Details
Duration: 1 Block (10 weeks of rigorous learning).
Schedule: July 28 – October 5, 2025.
Time Commitment: At least 7 hours per week (to keep up with lessons, assignments, and projects).

Requirements for Enrollment
Before proceeding, ensure you:
- Can dedicate 7+ hours weekly to learning and assignments.
- Are ready to take a prior knowledge test (link provided below). This helps us tailor the experience to your skill level.

⚠️ Please only take the test if you can meet the time and commitment requirements above.

We're here to support your growth, but success in this course depends on your availability and dedication. If you're ready, we can't wait to see you in class!

Best regards,
DigSkills Team`
    },
    "data-analysis-email": {
        subject: "Welcome to Data Analysis (Excel & Power BI)",
        body: `Dear {firstName},

Thank you for your interest in our Data Analysis (Excel & Power BI) course! We're excited to help you develop valuable data skills. Below are key details to help you prepare:

Key Details
Duration: 1 Block (10 weeks of rigorous learning).
Schedule: July 28 – October 5, 2025.
Time Commitment: At least 7 hours per week (to keep up with lessons, assignments, and projects).

Requirements for Enrollment
Before proceeding, ensure you:
- Can dedicate 7+ hours weekly to learning and assignments.
- Are ready to take a prior knowledge test (link provided below). This helps us tailor the experience to your skill level.

⚠️ Please only take the test if you can meet the time and commitment requirements above.

We're here to support your growth, but success in this course depends on your availability and dedication. If you're ready, we can't wait to see you in class!

Best regards,
DigSkills Team`
    },
    "data-advanced-email": {
        subject: "Welcome to Data Analysis Advanced (SQL & Python)",
        body: `Dear {firstName},

Thank you for your interest in our Data Analysis Advanced (SQL & Python) course! We're excited to help you take your data skills to the next level. Below are key details to help you prepare:

Key Details
Duration: 1 Block (10 weeks of rigorous learning).
Schedule: July 28 – October 5, 2025.
Time Commitment: At least 7 hours per week (to keep up with lessons, assignments, and projects).

Requirements for Enrollment
Before proceeding, ensure you:
- Can dedicate 7+ hours weekly to learning and assignments.
- Have basic knowledge of data analysis concepts.
- Are ready to take a prior knowledge test (link provided below). This helps us tailor the experience to your skill level.

⚠️ Please only take the test if you can meet the time and commitment requirements above.

We're here to support your growth, but success in this course depends on your availability and dedication. If you're ready, we can't wait to see you in class!

Best regards,
DigSkills Team`
    },
    "cyber-email": {
        subject: "Welcome to Cybersecurity Essentials",
        body: `Dear {firstName},

Thank you for your interest in our Cybersecurity Essentials course! We're excited to help you build foundational security knowledge. Below are key details to help you prepare:

Key Details
Duration: 1 Block (10 weeks of rigorous learning).
Schedule: July 28 – October 5, 2025.
Time Commitment: At least 7 hours per week (to keep up with lessons, assignments, and projects).

Requirements for Enrollment
Before proceeding, ensure you:
- Can dedicate 7+ hours weekly to learning and assignments.
- Are ready to take a prior knowledge test (link provided below). This helps us tailor the experience to your skill level.

⚠️ Please only take the test if you can meet the time and commitment requirements above.

We're here to support your growth, but success in this course depends on your availability and dedication. If you're ready, we can't wait to see you in class!

Best regards,
DigSkills Team`
    },
    "data-science-email": {
        subject: "Welcome to Data Science with Excel",
        body: `Dear {firstName},

Thank you for your interest in our Data Science with Excel course! We're excited to introduce you to data science concepts. Below are key details to help you prepare:

Key Details
Duration: 1 Block (10 weeks of rigorous learning).
Schedule: July 28 – October 5, 2025.
Time Commitment: At least 7 hours per week (to keep up with lessons, assignments, and projects).

Requirements for Enrollment
Before proceeding, ensure you:
- Can dedicate 7+ hours weekly to learning and assignments.
- Have basic Excel knowledge.
- Are ready to take a prior knowledge test (link provided below). This helps us tailor the experience to your skill level.

⚠️ Please only take the test if you can meet the time and commitment requirements above.

We're here to support your growth, but success in this course depends on your availability and dedication. If you're ready, we can't wait to see you in class!

Best regards,
DigSkills Team`
    },
    "cyber-junior-email": {
        subject: "Welcome to Junior Cybersecurity Analyst",
        body: `Dear {firstName},

Thank you for your interest in our Junior Cybersecurity Analyst course! We're excited to help you start your cybersecurity career. Below are key details to help you prepare:

Key Details
Duration: 1 Block (10 weeks of rigorous learning).
Schedule: July 28 – October 5, 2025.
Time Commitment: At least 7 hours per week (to keep up with lessons, assignments, and projects).

Requirements for Enrollment
Before proceeding, ensure you:
- Can dedicate 7+ hours weekly to learning and assignments.
- Have basic cybersecurity knowledge.
- Are ready to take a prior knowledge test (link provided below). This helps us tailor the experience to your skill level.

⚠️ Please only take the test if you can meet the time and commitment requirements above.

We're here to support your growth, but success in this course depends on your availability and dedication. If you're ready, we can't wait to see you in class!

Best regards,
DigSkills Team`
    },
    "english-it-email": {
        subject: "Welcome to English for IT",
        body: `Dear {firstName},

Thank you for your interest in our English for IT course! We're excited to help you improve your technical English skills. Below are key details to help you prepare:

Key Details
Duration: 1 Block (10 weeks of rigorous learning).
Schedule: July 28 – October 5, 2025.
Time Commitment: At least 7 hours per week (to keep up with lessons, assignments, and projects).

Requirements for Enrollment
Before proceeding, ensure you:
- Can dedicate 7+ hours weekly to learning and assignments.
- Have basic English knowledge.
- Are ready to take a prior knowledge test (link provided below). This helps us tailor the experience to your skill level.

⚠️ Please only take the test if you can meet the time and commitment requirements above.

We're here to support your growth, but success in this course depends on your availability and dedication. If you're ready, we can't wait to see you in class!

Best regards,
DigSkills Team`
    },
    "c-email": {
        subject: "Welcome to C Essentials",
        body: `Dear {firstName},

Thank you for your interest in our C Essentials course! We're excited to introduce you to this foundational programming language. Below are key details to help you prepare:

Key Details
Duration: 1 Block (10 weeks of rigorous learning).
Schedule: July 28 – October 5, 2025.
Time Commitment: At least 7 hours per week (to keep up with lessons, assignments, and projects).

Requirements for Enrollment
Before proceeding, ensure you:
- Can dedicate 7+ hours weekly to learning and assignments.
- Are ready to take a prior knowledge test (link provided below). This helps us tailor the experience to your skill level.

⚠️ Please only take the test if you can meet the time and commitment requirements above.

We're here to support your growth, but success in this course depends on your availability and dedication. If you're ready, we can't wait to see you in class!

Best regards,
DigSkills Team`
    },
    "c-advanced-email": {
        subject: "Welcome to C Advanced",
        body: `Dear {firstName},

Thank you for your interest in our C Advanced course! We're excited to help you deepen your C programming skills. Below are key details to help you prepare:

Key Details
Duration: 1 Block (10 weeks of rigorous learning).
Schedule: July 28 – October 5, 2025.
Time Commitment: At least 7 hours per week (to keep up with lessons, assignments, and projects).

Requirements for Enrollment
Before proceeding, ensure you:
- Can dedicate 7+ hours weekly to learning and assignments.
- Have completed C Essentials or equivalent knowledge.
- Are ready to take a prior knowledge test (link provided below). This helps us tailor the experience to your skill level.

⚠️ Please only take the test if you can meet the time and commitment requirements above.

We're here to support your growth, but success in this course depends on your availability and dedication. If you're ready, we can't wait to see you in class!

Best regards,
DigSkills Team`
    },
    "cpp-email": {
        subject: "Welcome to C++ Essentials",
        body: `Dear {firstName},

Thank you for your interest in our C++ Essentials course! We're excited to introduce you to this powerful programming language. Below are key details to help you prepare:

Key Details
Duration: 1 Block (10 weeks of rigorous learning).
Schedule: July 28 – October 5, 2025.
Time Commitment: At least 7 hours per week (to keep up with lessons, assignments, and projects).

Requirements for Enrollment
Before proceeding, ensure you:
- Can dedicate 7+ hours weekly to learning and assignments.
- Have basic programming knowledge (preferably in C).
- Are ready to take a prior knowledge test (link provided below). This helps us tailor the experience to your skill level.

⚠️ Please only take the test if you can meet the time and commitment requirements above.

We're here to support your growth, but success in this course depends on your availability and dedication. If you're ready, we can't wait to see you in class!

Best regards,
DigSkills Team`
    },
    "python-email": {
        subject: "Welcome to Python Essentials",
        body: `Dear {firstName},

Thank you for your interest in our Python Essentials course! We're excited to introduce you to this versatile programming language. Below are key details to help you prepare:

Key Details
Duration: 1 Block (10 weeks of rigorous learning).
Schedule: July 28 – October 5, 2025.
Time Commitment: At least 7 hours per week (to keep up with lessons, assignments, and projects).

Requirements for Enrollment
Before proceeding, ensure you:
- Can dedicate 7+ hours weekly to learning and assignments.
- Are ready to take a prior knowledge test (link provided below). This helps us tailor the experience to your skill level.

⚠️ Please only take the test if you can meet the time and commitment requirements above.

We're here to support your growth, but success in this course depends on your availability and dedication. If you're ready, we can't wait to see you in class!

Best regards,
DigSkills Team`
    }
};

        // Registered Schools
        const registeredSchools = [
            "Paradise Model School",
            "Ogun State College",
            "Ibadan Grammar School",
            "Abuja Model Secondary",
            "Port Harcourt Academy"
        ];

        // DOM Elements
        const countrySelect = document.getElementById('country');
        const stateSelect = document.getElementById('state');
        const lgaSelect = document.getElementById('lga');
        const programCategorySelect = document.getElementById('programCategory');
        const programSelect = document.getElementById('program');
        const schoolContainer = document.getElementById('schoolContainer');
        const schoolSelect = document.getElementById('school');
        const enrollmentForm = document.getElementById('enrollmentForm');
        const successMessage = document.getElementById('successMessage');
        const generatedCode = document.getElementById('generatedCode');
        const copyCodeBtn = document.getElementById('copyCodeBtn');
        const whatsappLink = document.getElementById('whatsappLink');

        // Generate a unique application code
        function generateApplicationCode() {
            const chars = "ABCDEFGHJKLMNPQRSTUVWXYZ23456789";
            let code = "DIG-";
            for (let i = 0; i < 6; i++) {
                code += chars.charAt(Math.floor(Math.random() * chars.length));
            }
            return code;
        }

        // Generate CAPTCHA
        function generateCaptcha() {
            const chars = "0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ";
            let captcha = "";
            for (let i = 0; i < 6; i++) {
                captcha += chars.charAt(Math.floor(Math.random() * chars.length));
            }
            return captcha;
        }

        let currentCaptcha = generateCaptcha();
        document.getElementById('captcha-text').textContent = currentCaptcha;

        // Refresh CAPTCHA
        document.getElementById('refresh-captcha').addEventListener('click', function() {
            currentCaptcha = generateCaptcha();
            document.getElementById('captcha-text').textContent = currentCaptcha;
        });

        // Copy application code to clipboard
        copyCodeBtn.addEventListener('click', function() {
            const code = generatedCode.textContent;
            navigator.clipboard.writeText(code).then(() => {
                copyCodeBtn.innerHTML = '<i class="fas fa-check"></i> Copied!';
                setTimeout(() => {
                    copyCodeBtn.innerHTML = '<i class="far fa-copy"></i> Copy';
                }, 2000);
            });
        });

        // Populate Nigerian States
        function populateStates() {
            stateSelect.innerHTML = '<option value="">Select State</option>';
            Object.keys(nigeriaData).forEach(state => {
                const option = document.createElement('option');
                option.value = state;
                option.textContent = state;
                stateSelect.appendChild(option);
            });
        }

        // Populate LGAs based on state
        stateSelect.addEventListener('change', function() {
            const selectedState = this.value;
            lgaSelect.innerHTML = '<option value="">Select LGA</option>';
            
            if (selectedState && nigeriaData[selectedState]) {
                nigeriaData[selectedState].forEach(lga => {
                    const option = document.createElement('option');
                    option.value = lga;
                    option.textContent = lga;
                    lgaSelect.appendChild(option);
                });
            }
        });

        // Populate programs based on category
        programCategorySelect.addEventListener('change', function() {
            const selectedCategory = this.value;
            programSelect.innerHTML = '<option value="">Select Program</option>';
            programSelect.disabled = !selectedCategory;
            
            if (selectedCategory && programsByCategory[selectedCategory]) {
                programsByCategory[selectedCategory].forEach(program => {
                    const option = document.createElement('option');
                    option.value = program.name;
                    option.textContent = program.name;
                    option.dataset.template = program.emailTemplate;
                    programSelect.appendChild(option);
                });
                
                // Show/hide school selection based on category
                if (selectedCategory === 'school') {
                    schoolContainer.classList.remove('hidden');
                    schoolSelect.required = true;
                    
                    // Populate schools
                    schoolSelect.innerHTML = '<option value="">Select School</option>';
                    registeredSchools.forEach(school => {
                        const option = document.createElement('option');
                        option.value = school;
                        option.textContent = school;
                        schoolSelect.appendChild(option);
                    });
                } else {
                    schoolContainer.classList.add('hidden');
                    schoolSelect.required = false;
                }
            }
        });

        // Send email using Netlify Functions (to be implemented on your Netlify site)
        async function sendEmail(to, subject, body) {
            try {
                const response = await fetch('/.netlify/functions/send-email', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        to: to,
                        subject: subject,
                        body: body
                    })
                });
                
                if (!response.ok) {
                    throw new Error('Email sending failed');
                }
                
                return await response.json();
            } catch (error) {
                console.error('Error sending email:', error);
                return {success: false, error: error.message};
            }
        }

        // Get the appropriate email template for the selected program
        function getEmailTemplate(programName, programOption) {
            const templateKey = programOption ? programOption.dataset.template : 'default';
            const template = emailTemplates[templateKey] || emailTemplates['default-email'];
            
            return {
                subject: template.subject.replace('{program}', programName),
                body: template.body.replace('{program}', programName)
            };
        }

        // Form submission handler
        enrollmentForm.addEventListener('submit', async function(e) {
            e.preventDefault();
            
            // Validate CAPTCHA
            const enteredCaptcha = document.getElementById('captcha').value;
            if (enteredCaptcha !== currentCaptcha) {
                alert('CAPTCHA verification failed. Please try again.');
                currentCaptcha = generateCaptcha();
                document.getElementById('captcha-text').textContent = currentCaptcha;
                document.getElementById('captcha').value = '';
                return;
            }
            
            // Generate application code
            const applicationCode = generateApplicationCode();
            generatedCode.textContent = applicationCode;
            
            // Get form data
            const formData = new FormData(enrollmentForm);
            const formObject = Object.fromEntries(formData.entries());
            
            // Get selected program details
            const selectedProgram = programSelect.value;
            const selectedProgramOption = programSelect.options[programSelect.selectedIndex];
            
            // Update WhatsApp link with the code
            whatsappLink.href = `https://wa.me/2349051586024?text=Hello%20DigSkills,%20I%20just%20applied%20with%20code%20${applicationCode}`;
            
            // Show success message
            enrollmentForm.classList.add('hidden');
            successMessage.classList.remove('hidden');
            
            // Scroll to success message
            successMessage.scrollIntoView({ behavior: 'smooth' });
            
            // Prepare email content
            const emailTemplate = getEmailTemplate(selectedProgram, selectedProgramOption);
            
            // Replace placeholders in email body
            let emailBody = emailTemplate.body;
            for (const [key, value] of Object.entries(formObject)) {
                emailBody = emailBody.replace(new RegExp(`{${key}}`, 'g'), value);
            }
            
            // Add application code to email body
            emailBody += `\n\nYour Application Code: ${applicationCode}`;
            
            // Send email to admin (dig2skills@gmail.com)
            const adminEmailResult = await sendEmail(
                'dig2skills@gmail.com',
                `New Enrollment: ${selectedProgram} - ${applicationCode}`,
                `New enrollment details:\n\n${JSON.stringify(formObject, null, 2)}\n\nApplication Code: ${applicationCode}`
            );
            
            // Send confirmation email to user
            const userEmailResult = await sendEmail(
                formObject.email,
                emailTemplate.subject,
                emailBody
            );
            
            if (!userEmailResult.success) {
                console.error('Failed to send confirmation email to user:', userEmailResult.error);
            }
            
            if (!adminEmailResult.success) {
                console.error('Failed to send notification email to admin:', adminEmailResult.error);
            }
            
            // Submit the form data to Netlify (background process)
            formData.append('applicationCode', applicationCode);
            
            fetch('/', {
                method: 'POST',
                body: formData,
                headers: {
                    'Accept': 'application/json'
                }
            }).then(response => {
                if (!response.ok) {
                    throw new Error('Network response was not ok');
                }
                console.log('Form submitted successfully');
            }).catch(error => {
                console.error('Error submitting form:', error);
            });
        });

        // Initialize form
        document.addEventListener('DOMContentLoaded', function() {
            // For Nigeria by default
            if (countrySelect.value === 'Nigeria') {
                populateStates();
            }
            
            // Handle country change
            countrySelect.addEventListener('change', function() {
                if (this.value === 'Nigeria') {
                    populateStates();
                } else {
                    stateSelect.innerHTML = '<option value="">Select State/Region</option>';
                    lgaSelect.innerHTML = '<option value="">Select District</option>';
                }
            });
        });
    </script>
</body>
</html>
